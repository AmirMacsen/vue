# <font color='cornflowerblue'>ğŸ›´å…¨å±€è·¯ç”±å®ˆå«</font>

> è·¯ç”±å®ˆå«ç›¸å½“äºä¸­é—´ä»¶æˆ–è€…è¯´åˆ‡é¢,æ·»åŠ ä¹‹åæ‰€æœ‰çš„è·¯ç”±è·³è½¬å¯ä»¥ç»ç”±æ­¤å¤„,å¯ä»¥åšæƒé™æ ¡éªŒä¹‹ç±»çš„å·¥ä½œ.
>
> vue-routerä¸­å…¨å±€è·¯ç”±å®ˆå«å¸¸ç”¨çš„æœ‰:å‰ç½®è·¯ç”±å®ˆå«\åç½®è·¯ç”±å®ˆå«,å‰ç½®è·¯ç”±å®ˆå«åœ¨æ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹å‰è¢«è°ƒç”¨,åç½®è·¯ç”±å®ˆå«åœ¨æ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹åè¢«è°ƒç”¨

## é…ç½®

> è·¯ç”±å®ˆå«éœ€è¦ç»™æ¯ä¸€ä¸ªè·¯ç”±è®¾ç½®ä¸€ä¸ªname

```js
//è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºåº”ç”¨çš„è·¯ç”±å™¨
import VueRouter from "vue-router"
import About from "@/pages/About";
import Home from "@/pages/Home";
import News from "@/pages/News";
import Message from "@/pages/Messages";
import Detail from "@/pages/Detail";

//åˆ›å»ºä¸€ä¸ªè·¯ç”±å™¨
const router =  new VueRouter({
    routes:[
        {
            name:"about",
            path:'/about',
            component:About,
            meta:{isAuth:false,title:"å…³äº"}
        },
        {
            path:'/home',
            component:Home,
            meta:{isAuth:false,title:"é¦–é¡µ"},
            children:[
                {
                    name:"news",
                    path:'news',
                    component:News,
                    meta:{isAuth:true,title:"æ–°é—»"},
                },
                {
                    name:"massages",
                    path:'message',
                    component:Message,
                    meta:{isAuth:true,title:"ä¿¡æ¯"},
                    children:[
                        {
                            name:"detail",
                            path:'detail',
                            component:Detail,
                            meta:{isAuth:true,title:"ä¿¡æ¯åˆ—è¡¨"},
                            //ç¬¬ä¸€ç§å†™æ³•ï¼špropsä¸ºå€¼å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ‰€æœ‰çš„çš„k-væœ€ç»ˆéƒ½ä¼šé€šè¿‡propsä¼ é€’ç»™Detailç»„ä»¶
                            // props:{id:100,title:"amir"}
                            //ç¬¬äºŒç§å†™æ³•ï¼špropsä¸ºå¸ƒå°”å€¼ï¼Œè·¯ç”±æ”¶åˆ°çš„æ‰€æœ‰paramså‚æ•°é€šè¿‡propsä¼ é€’ç»™Detailç»„ä»¶
                            // props:true
                            //ç¬¬ä¸‰ç§å†™æ³•ï¼špropså€¼ä¸ºå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›å¯¹è±¡ä¸­æ¯ä¸€ç»„k-véƒ½ä¼šé€šè¿‡propsä¼ é€’ç»™Detailç»„ä»¶
                            props($route){
                                return {
                                    id:$route.query.id,
                                    title:$route.query.title
                                }
                            }
                        }
                    ]
                }
            ]
        },
    ]
})

//å‰ç½®è·¯ç”±å®ˆå«
router.beforeEach((to,from,next)=>{
    console.log(from)

    if(!to.meta['isAuth']){
        next()
    }else{
        if(localStorage.getItem('name')==="amir"){
            next()
        }else{
            alert("æƒé™ä¸è¶³")
        }
    }

})

//åç½®è·¯ç”±å®ˆå«
router.afterEach((to,from)=>{
    console.log(from)
    document.title = to.meta['title'] || "ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ"
})

export default router
```

# <font color='cornflowerblue'>ğŸ›´ç‹¬äº«è·¯ç”±å®ˆå«</font>

> ç‹¬äº«è·¯ç”±å®ˆå«åªç»™æŸä¸€ä¸ªè·¯ç”±é…ç½®

## index.js

```js
//è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºåº”ç”¨çš„è·¯ç”±å™¨
import VueRouter from "vue-router"
import About from "@/pages/About";
import Home from "@/pages/Home";
import News from "@/pages/News";
import Message from "@/pages/Messages";
import Detail from "@/pages/Detail";

//åˆ›å»ºä¸€ä¸ªè·¯ç”±å™¨
const router =  new VueRouter({
    routes:[
        {
            name:"about",
            path:'/about',
            component:About,
            meta:{isAuth:false,title:"å…³äº"}
        },
        {
            path:'/home',
            component:Home,
            meta:{isAuth:false,title:"é¦–é¡µ"},
            children:[
                {
                    name:"news",
                    path:'news',
                    component:News,
                    meta:{isAuth:true,title:"æ–°é—»"},
                },
                {
                    name:"massages",
                    path:'message',
                    component:Message,
                    meta:{isAuth:true,title:"ä¿¡æ¯"},
                    children:[
                        {
                            name:"detail",
                            path:'detail',
                            component:Detail,
                            meta:{isAuth:true,title:"ä¿¡æ¯åˆ—è¡¨"},
                            //ç¬¬ä¸€ç§å†™æ³•ï¼špropsä¸ºå€¼å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ‰€æœ‰çš„çš„k-væœ€ç»ˆéƒ½ä¼šé€šè¿‡propsä¼ é€’ç»™Detailç»„ä»¶
                            // props:{id:100,title:"amir"}
                            //ç¬¬äºŒç§å†™æ³•ï¼špropsä¸ºå¸ƒå°”å€¼ï¼Œè·¯ç”±æ”¶åˆ°çš„æ‰€æœ‰paramså‚æ•°é€šè¿‡propsä¼ é€’ç»™Detailç»„ä»¶
                            // props:true
                            //ç¬¬ä¸‰ç§å†™æ³•ï¼špropså€¼ä¸ºå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›å¯¹è±¡ä¸­æ¯ä¸€ç»„k-véƒ½ä¼šé€šè¿‡propsä¼ é€’ç»™Detailç»„ä»¶
                            props($route){
                                return {
                                    id:$route.query.id,
                                    title:$route.query.title
                                }
                            },
                            beforeEnter(to,from,next){
                                if(localStorage.getItem('password')==='123'){
                                    next()
                                }else {
                                    alert("æƒé™ä¸è¶³")
                                }
                            }
                        }
                    ]
                }
            ]
        },
    ]
})

//å‰ç½®è·¯ç”±å®ˆå«
router.beforeEach((to,from,next)=>{
    console.log(from)

    if(!to.meta['isAuth']){
        next()
    }else{
        if(localStorage.getItem('name')==="amir"){
            next()
        }else{
            alert("æƒé™ä¸è¶³")
        }
    }

})

//åç½®è·¯ç”±å®ˆå«
router.afterEach((to,from)=>{
    console.log(from)
    document.title = to.meta['title'] || "ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ"
})

export default router
```

> ä»¥ä¸Šä»£ç é™åˆ¶äº†ç”¨æˆ·æŸ¥çœ‹æ¶ˆæ¯è¯¦æƒ…çš„æ—¶å€™åˆ¤æ–­localstorageæ˜¯å¦å­˜åœ¨passwordå¹¶ä¸”æ˜¯123,ç‹¬äº«è·¯ç”±å®ˆå«å°±è¿™ä¸€ä¸ªbeforeEnter,å¯ç”±é…åˆå…¶ä»–è·¯ç”±å®ˆå«ä¸€èµ·ä½¿ç”¨



# <font color='cornflowerblue'>ğŸ›´ç»„ä»¶å†…è·¯ç”±å®ˆå«</font>

> ç»„ä»¶å†…è·¯ç”±å®ˆå«åªæœ‰åœ¨é€šè¿‡è·¯ç”±è§„åˆ™åŒ¹é…è¿›å…¥/ç¦»å¼€çš„æ—¶å€™è§¦å‘,å…¶ä»–æ–¹å¼åˆ™ä¸ç”Ÿæ•ˆ

```vue
<template>
  <ul>
    <h4 :style="{opacity}">æ¬¢è¿å­¦ä¹ router</h4>
    <input>news001
    <input>news002
    <input>news003
  </ul>
</template>

<script>
export default {
  name: "News",
  data(){
    return{
      opacity:1
    }
  },
  //ç»„ä»¶æ¸²æŸ“åè§¦å‘
  activated() {
    this.timer = setInterval(()=>{
      console.log("å®šæ—¶å™¨è¢«æ‰§è¡Œäº†")
      this.opacity -= 0.01
      if(this.opacity <= 0) this.opacity = 1
    },)
  },
  //ç¦»å¼€å½“å‰ç»„ä»¶æ—¶è§¦å‘
  deactivated() {
    clearInterval(this.timer)
  },
  //è·¯ç”±è§„åˆ™åŒ¹é…è¿›å…¥çš„æ—¶å€™è§¦å‘
  beforeRouteEnter(to,from,next){
    if(localStorage.getItem('password')==="123"){
      next()
    }else{
      alert("æƒé™ä¸è¶³")
    }
  },

  //è·¯ç”±è§„åˆ™åŒ¹é…ç¦»å¼€çš„æ—¶å€™è§¦å‘
  beforeRouteLeave(to,from,next){
    console.log(to,from,next)
    next()
  }
}
</script>

<style scoped>
input {
  display: block;
}
</style>
```